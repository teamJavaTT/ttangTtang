<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.zerock.mapper.MypageMainMapper">

	<select id="selectAccountDeclaration"
		resultType="org.zerock.domain.AccountDeclaration">
		<![CDATA[
		select * 
		from declaration 
		order by dno desc
		]]>
	</select>

	<select id="selectBlockUser"
		resultType="org.zerock.domain.BlockUser">
		<![CDATA[
		select * 
		from block 
		order by bno desc
		]]>
	</select>

	<select id="selectLikeProduct"
		resultType="org.zerock.domain.Product">
      <![CDATA[
      select * 
      from product 
      where ino in (
         select ino 
         from likeproduct 
         where userid=#{userid}
      )
      ]]>
	</select>


	<select id="selectSellList" parameterType="map"
		resultType="org.zerock.domain.Product">

		select *
		from product
		where userid=#{userid}

		<if test='!sellchk.equals("A")'>
			and sellcheck=#{sellchk}
		</if>
		order by ino desc

	</select>

	<select id="selectDeleteForm"
		resultType="org.zerock.domain.Secession">
		<![CDATA[
		select * 
		from Secession 
		order by sno desc
		]]>
	</select>

	<insert id="insertAccountDeclaration">
		insert into declaration values
		(declaration_seq.nextval, #{userId}, #{declId}, #{dtext}, sysdate)
	</insert>

	<select id="selectCountDec" parameterType="map" 
		resultType="int">
		<![CDATA[
		select count(*) from declaration where userid=#{userid} and duid=#{badid}
		]]>
	</select>
	
	
	<insert id="insertBlockUser">
		insert into block values
		(block_seq.nextval, #{userId}, #{blockid2}, #{btext}, sysdate)
	</insert>

	<select id="selectCountBl" parameterType="map" 
		resultType="int">
		<![CDATA[
		select count(*) from block where userid=#{userid} and bid=#{blockid}
		]]>
	</select>



</mapper>
