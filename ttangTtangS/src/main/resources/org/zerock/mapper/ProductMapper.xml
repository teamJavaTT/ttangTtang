<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.zerock.mapper.ProductMapper">

	<!-- Insert -->
	<insert id="insertProduct">
		insert into
		product
		<if test='auctioncheck == "N"'>
			(INO,
			USERID,
			CCODE,
			AUCTIONCHECK,
			UAD,
			INAME,
			PRICE,
			PRICETEXT,
			IMAGEFACE,
			VIEWCOUNT,
			LIKECOUNT,
			PDATE,
			SELLCHECK)
			VALUES(
			product_seq.NEXTVAL,
			#{userid},
			#{ccode},
			#{auctioncheck},
			#{uad},
			#{iname},
			#{price},
			#{priceText},
			#{imageface},
			0,
			0,
			sysdate,
			'N')
		</if>
		<if test='auctioncheck == "Y"'>
			(INO,
			USERID,
			CCODE,
			AUCTIONCHECK,
			UAD,
			INAME,
			MINPRICE,
			MAXPRICE,
			APRICENOW,
			APRICEEND,
			PRICETEXT,
			IMAGEFACE,
			VIEWCOUNT,
			LIKECOUNT,
			PDATE,
			ENDTIME,
			AUCTIONTIME,
			SELLCHECK)
			VALUES(
			product_seq.NEXTVAL,
			#{userid},
			#{ccode},
			#{auctioncheck},
			#{uad},
			#{iname},
			#{minPrice},
			#{maxPrice},
			#{apricenow},
			0,
			#{pricetext},
			#{imageface},
			0,
			0,
			sysdate,
			sysdate+${totalTime}/24,
			#{totalTime},
			'N')
		</if>
	</insert>
	<!-- Detail -->
	<select id="selectProduct"
		resultType="org.zerock.domain.ProductDetail">
		<![CDATA[
select * from product where ino =#{ino}
	]]>
	</select>
	<select id="selectCname" resultType="String">
		select cname from category
		where ccode=#{ccode}
	</select>
	<!-- Update -->
	<update id="productModify">
		update product set
		<choose>
			<when test='aucCHK = "N"'>
				iname=#{productNameNor},
				ccode=#{ccode},
				price =#{price} ,
				pricetext =#{pricetext} ,
				imageface =#{imageface}
				where ino = #{ino}
			</when>
			<when test='aucChk="Y"'>
				iname = #{iname},
				ccode =#{ccode},
				minprice =#{price},
				pricetext = #{pricetext} ,
				imageface = #{imageface}
				where ino =#{ino}
			</when>
		</choose>
	</update>
</mapper>
